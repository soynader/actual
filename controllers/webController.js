(function (_0x55126a, _0x2bba24) { const _0x28d2ad = _0x576b, _0x4329ef = _0x55126a(); while (!![]) { try { const _0x2f4799 = parseInt(_0x28d2ad(0x22d)) / 0x1 * (-parseInt(_0x28d2ad(0x1fc)) / 0x2) + parseInt(_0x28d2ad(0x21b)) / 0x3 + -parseInt(_0x28d2ad(0x20a)) / 0x4 + -parseInt(_0x28d2ad(0x21f)) / 0x5 * (-parseInt(_0x28d2ad(0x208)) / 0x6) + parseInt(_0x28d2ad(0x21e)) / 0x7 + parseInt(_0x28d2ad(0x20c)) / 0x8 * (parseInt(_0x28d2ad(0x202)) / 0x9) + -parseInt(_0x28d2ad(0x230)) / 0xa; if (_0x2f4799 === _0x2bba24) break; else _0x4329ef['push'](_0x4329ef['shift']()); } catch (_0x11a26c) { _0x4329ef['push'](_0x4329ef['shift']()); } } }(_0x5ac8, 0x9cd19)); function _0x576b(_0x1cfb84, _0x5a4a82) { const _0x5ac8e4 = _0x5ac8(); return _0x576b = function (_0x576b0b, _0x2ee6f8) { _0x576b0b = _0x576b0b - 0x1e7; let _0x4c6288 = _0x5ac8e4[_0x576b0b]; return _0x4c6288; }, _0x576b(_0x1cfb84, _0x5a4a82); } function _0x5ac8() { const _0x168618 = ['length', 'languages', 'youtube_video', 'UPDATE\x20web\x20SET\x20app_name\x20=\x20?,\x20youtube_video\x20=\x20?,\x20meta\x20=\x20?,\x20currency_symbol\x20=\x20?,\x20exchange_rate\x20=\x20?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20smtp_host\x20=\x20?,smtp_port\x20=\x20?,smtp_email\x20=\x20?,smtp_pass\x20=\x20?\x20\x20', 'smtp_pass', '/languages/', 'stringify', 'DBHOST', 'query', '.json', 'Server\x20error', 'env', 'files', 'UPDATE\x20payment_gateways\x20SET\x20active\x20=\x20?,\x20payment_id\x20=\x20?,\x20payment_keys\x20=\x20?\x20WHERE\x20code\x20=\x20?\x20', 'DBUSER', 'Error\x20reading\x20folder:', 'unlinkSync', 'smtp_email', 'smtp_host', 'currency_symbol', 'File\x20read\x20failed:', 'payment_id', '16092wxSdfv', 'join', 'Destination\x20file\x20already\x20exists', 'UPDATE\x20web\x20SET\x20app_name\x20=\x20?,\x20youtube_video\x20=\x20?,\x20meta\x20=\x20?,\x20currency_symbol\x20=\x20?,\x20exchange_rate\x20=\x20?,\x20logo\x20=\x20?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20smtp_host\x20=\x20?,smtp_port\x20=\x20?,smtp_email\x20=\x20?,smtp_pass\x20=\x20?\x20', 'substring', 'file', '165321FPFrhb', 'active', 'Settings\x20was\x20updated', 'Languages\x20updated\x20refresh\x20the\x20page\x20to\x20make\x20effects', 'updatedjson', 'SELECT\x20*\x20FROM\x20payment_gateways', '6JvWvHT', 'File\x20write\x20failed:', '3456708kiotOf', 'parse', '360HlkxdK', 'body', 'log', 'existsSync', 'readFile', 'import', 'server\x20error', 'token', 'DBPASS', 'meta', '/client/public/images/', 'readdir', 'random', 'name', 'smtp_port', '1479144gOSmoR', 'You\x20cannot\x20delete\x20all\x20languages', '/client/public/db/whatsham_install.sql', '8748964qtXsTe', '3313665Oucjmu', 'endsWith', 'SELECT\x20*\x20FROM\x20web', 'https://verify-whatsham.oneoftheprojects.com/api/whatsham/download_whatsham?token=', 'exchange_rate', 'json', 'hit', 'File\x20deletion\x20failed:', 'now', 'utf8', 'floor', 'code', 'status', 'filter', '78gLRMZw', '/client/public.zip', 'SELECT\x20*\x20FROM\x20payment_gateways\x20WHERE\x20active\x20=\x20?', '10981440DkyFlW', 'cwd']; _0x5ac8 = function () { return _0x168618; }; return _0x5ac8(); } import _0x272acd from '../database/dbpromise.js'; import _0x1dd78a from 'fs'; import _0x3b9785 from 'path'; import _0x5f2a84 from 'mysql-import'; import _0x16198f from 'node-fetch'; import { createWriteStream } from 'fs'; import { pipeline } from 'stream/promises'; import _0x1c026e from 'extract-zip'; const getAllPayments = async (_0x583a04, _0x363d77) => { const _0x9be128 = _0x576b; try { const _0x402844 = await _0x272acd(_0x9be128(0x22f), [0x1]); _0x363d77[_0x9be128(0x224)]({ 'data': _0x402844, 'success': !![] }); } catch (_0x5a92c7) { _0x363d77[_0x9be128(0x224)]({ 'err': _0x5a92c7, 'msg': _0x9be128(0x212) }), console[_0x9be128(0x20e)](_0x5a92c7); } }, getAllPaymentsAdmin = async (_0x2cd5b3, _0x69759b) => { const _0x489eb6 = _0x576b; try { const _0xf45d8 = await _0x272acd(_0x489eb6(0x207), []); _0x69759b['json']({ 'data': _0xf45d8, 'success': !![] }); } catch (_0x5eb4fd) { _0x69759b['json']({ 'err': _0x5eb4fd, 'msg': _0x489eb6(0x212) }), console[_0x489eb6(0x20e)](_0x5eb4fd); } }, getWebPublic = async (_0x2c5e20, _0x17f883) => { const _0x5242a3 = _0x576b; try { const _0x26e423 = await _0x272acd(_0x5242a3(0x221), []); _0x17f883[_0x5242a3(0x224)]({ 'data': _0x26e423[0x0], 'success': !![] }); } catch (_0x6d44bd) { _0x17f883[_0x5242a3(0x224)]({ 'err': _0x6d44bd, 'msg': _0x5242a3(0x212) }), console['log'](_0x6d44bd); } }, updatePayment = async (_0x1bcdae, _0x111fe4) => { const _0x666c49 = _0x576b; try { await _0x272acd(_0x666c49(0x1f3), [_0x1bcdae[_0x666c49(0x20d)][_0x666c49(0x203)], _0x1bcdae[_0x666c49(0x20d)][_0x666c49(0x1fb)], _0x1bcdae[_0x666c49(0x20d)]['payment_keys'], _0x1bcdae[_0x666c49(0x20d)][_0x666c49(0x22a)]]), _0x111fe4[_0x666c49(0x224)]({ 'msg': 'Method\x20was\x20updated', 'success': !![] }); } catch (_0x4e2ed3) { _0x111fe4[_0x666c49(0x224)]({ 'err': _0x4e2ed3, 'msg': _0x666c49(0x212) }), console[_0x666c49(0x20e)](_0x4e2ed3); } }, getOneLang = async (_0x1f58d2, _0x4a70be) => { const _0x3803d5 = _0x576b; try { console['log'](_0x1f58d2[_0x3803d5(0x1ee)]); const _0x2d0c75 = process['cwd'](), _0x2806c1 = _0x1f58d2['query'][_0x3803d5(0x22a)]; _0x1dd78a[_0x3803d5(0x210)](_0x2d0c75 + _0x3803d5(0x1eb) + _0x2806c1 + _0x3803d5(0x1ef), _0x3803d5(0x228), (_0x1e38b0, _0x22cf47) => { const _0x3123e8 = _0x3803d5; if (_0x1e38b0) { console[_0x3123e8(0x20e)](_0x3123e8(0x1fa), _0x1e38b0), _0x4a70be[_0x3123e8(0x224)]({ 'notfound': !![] }); return; } _0x4a70be[_0x3123e8(0x224)]({ 'success': !![], 'data': JSON[_0x3123e8(0x20b)](_0x22cf47) }); }); } catch (_0x7b3649) { _0x4a70be[_0x3803d5(0x224)]({ 'err': _0x7b3649, 'msg': 'server\x20error' }), console[_0x3803d5(0x20e)](_0x7b3649); } }, getAllLangName = async (_0x1a67f0, _0x2784a8) => { const _0x973409 = _0x576b; try { const _0x3a8098 = process[_0x973409(0x231)](); _0x1dd78a[_0x973409(0x217)](_0x3a8098 + _0x973409(0x1eb), (_0x3a41e9, _0xf8989c) => { const _0x257444 = _0x973409; _0x2784a8[_0x257444(0x224)]({ 'success': !![], 'data': _0xf8989c }); }); } catch (_0x3c1cd4) { _0x2784a8[_0x973409(0x224)]({ 'msg': _0x973409(0x1f0), 'err': _0x3c1cd4 }), console['log'](_0x3c1cd4); } }, updateLanguage = async (_0x1db836, _0x5dd118) => { const _0x7a9ad9 = _0x576b; try { console[_0x7a9ad9(0x20e)](_0x7a9ad9(0x225)); const _0x2a47bd = process[_0x7a9ad9(0x231)](), _0x354fbd = _0x1db836[_0x7a9ad9(0x20d)]['code'], _0x1b203e = _0x1db836[_0x7a9ad9(0x20d)][_0x7a9ad9(0x206)], _0x153fb2 = _0x3b9785[_0x7a9ad9(0x1fd)](_0x2a47bd, _0x7a9ad9(0x1e7), _0x354fbd + '.json'); _0x1dd78a['writeFile'](_0x153fb2, JSON[_0x7a9ad9(0x1ec)](_0x1b203e), 'utf8', _0x41dd18 => { const _0x489fef = _0x7a9ad9; if (_0x41dd18) { console[_0x489fef(0x20e)](_0x489fef(0x209), _0x41dd18), _0x5dd118[_0x489fef(0x224)]({ 'success': ![], 'error': _0x41dd18 }); return; } _0x5dd118[_0x489fef(0x224)]({ 'success': !![], 'msg': _0x489fef(0x205) }); }); } catch (_0x1481cf) { _0x5dd118[_0x7a9ad9(0x224)]({ 'success': ![], 'error': _0x1481cf, 'msg': _0x7a9ad9(0x1f0) }), console[_0x7a9ad9(0x20e)](_0x1481cf); } }, deleteLanguage = async (_0x176392, _0x299935) => { const _0x38d3dc = _0x576b; try { const _0x5436e1 = process[_0x38d3dc(0x231)](), _0x39dd14 = _0x176392[_0x38d3dc(0x20d)][_0x38d3dc(0x22a)], _0x229abc = _0x3b9785[_0x38d3dc(0x1fd)](_0x5436e1, 'languages'), _0x14ef7f = _0x3b9785[_0x38d3dc(0x1fd)](_0x229abc, _0x39dd14 + _0x38d3dc(0x1ef)); _0x1dd78a[_0x38d3dc(0x217)](_0x229abc, (_0x4a4c6f, _0x3a4057) => { const _0x203c81 = _0x38d3dc; if (_0x4a4c6f) { console[_0x203c81(0x20e)](_0x203c81(0x1f5), _0x4a4c6f), _0x299935[_0x203c81(0x224)]({ 'success': ![], 'error': _0x4a4c6f }); return; } const _0x1426a7 = _0x3a4057[_0x203c81(0x22c)](_0xaef917 => _0xaef917['endsWith'](_0x203c81(0x1ef))); if (_0x1426a7[_0x203c81(0x232)] === 0x1) { _0x299935[_0x203c81(0x224)]({ 'success': ![], 'msg': _0x203c81(0x21c) }); return; } _0x1dd78a['unlink'](_0x14ef7f, _0x7a269a => { const _0x46884f = _0x203c81; if (_0x7a269a) { console['log'](_0x46884f(0x226), _0x7a269a), _0x299935[_0x46884f(0x224)]({ 'success': ![], 'error': _0x7a269a }); return; } _0x299935['json']({ 'success': !![], 'msg': 'Language\x20file\x20deleted\x20successfully' }); }); }); } catch (_0x548f02) { _0x299935[_0x38d3dc(0x224)]({ 'success': ![], 'error': _0x548f02, 'msg': 'Server\x20error' }), console[_0x38d3dc(0x20e)](_0x548f02); } }, duplicateRandomLanguage = async (_0x4289e8, _0x122dce) => { const _0x68bd2d = _0x576b; try { const _0x7a9d17 = process['cwd'](), _0x3de9a6 = _0x4289e8[_0x68bd2d(0x20d)]['newcode'], _0x368214 = _0x3b9785[_0x68bd2d(0x1fd)](_0x7a9d17, _0x68bd2d(0x1e7)); _0x1dd78a['readdir'](_0x368214, (_0x5d2e46, _0x529ffa) => { const _0x1742a1 = _0x68bd2d; if (_0x5d2e46) { console[_0x1742a1(0x20e)](_0x1742a1(0x1f5), _0x5d2e46), _0x122dce[_0x1742a1(0x224)]({ 'success': ![], 'error': _0x5d2e46 }); return; } const _0x2aac04 = _0x529ffa[_0x1742a1(0x22c)](_0x3e0c1b => _0x3e0c1b[_0x1742a1(0x220)](_0x1742a1(0x1ef))), _0x5a1e54 = Math[_0x1742a1(0x229)](Math[_0x1742a1(0x218)]() * _0x2aac04['length']), _0x337a1a = _0x2aac04[_0x5a1e54], _0x44cb68 = _0x3b9785[_0x1742a1(0x1fd)](_0x368214, _0x337a1a), _0x2bfb81 = _0x3b9785[_0x1742a1(0x1fd)](_0x368214, _0x3de9a6 + _0x1742a1(0x1ef)); if (_0x1dd78a['existsSync'](_0x2bfb81)) { _0x122dce[_0x1742a1(0x224)]({ 'success': ![], 'msg': _0x1742a1(0x1fe) }); return; } _0x1dd78a['copyFile'](_0x44cb68, _0x2bfb81, _0x1fcc73 => { const _0x395180 = _0x1742a1; if (_0x1fcc73) { console[_0x395180(0x20e)]('File\x20duplication\x20failed:', _0x1fcc73), _0x122dce[_0x395180(0x224)]({ 'success': ![], 'error': _0x1fcc73 }); return; } _0x122dce[_0x395180(0x224)]({ 'success': !![], 'msg': 'Language\x20file\x20duplicated\x20successfully' }); }); }); } catch (_0x496684) { _0x122dce[_0x68bd2d(0x224)]({ 'success': ![], 'error': _0x496684, 'msg': _0x68bd2d(0x1f0) }), console[_0x68bd2d(0x20e)](_0x496684); } }, updateAppConfig = async (_0x5c3082, _0x72f00f) => { const _0x3a91cc = _0x576b; try { console[_0x3a91cc(0x20e)](_0x5c3082['body']['youtube_video']); if (_0x5c3082[_0x3a91cc(0x1f2)]) { if (_0x5c3082[_0x3a91cc(0x1f2)]['file'] !== undefined) { const _0x41d691 = _0x5c3082[_0x3a91cc(0x1f2)][_0x3a91cc(0x201)], _0x26eef9 = ('' + Math[_0x3a91cc(0x218)]())[_0x3a91cc(0x200)](0x2, 0x7) + Date[_0x3a91cc(0x227)]() + _0x41d691[_0x3a91cc(0x219)], _0x55a17a = process[_0x3a91cc(0x231)](); _0x41d691['mv'](_0x55a17a + _0x3a91cc(0x216) + _0x26eef9, _0x192b3e => { const _0x5a4698 = _0x3a91cc; if (_0x192b3e) return console[_0x5a4698(0x20e)](_0x192b3e), _0x72f00f['json']({ 'err': _0x192b3e }); }), await _0x272acd(_0x3a91cc(0x1ff), [_0x5c3082[_0x3a91cc(0x20d)]['app_name'], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1e8)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x215)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1f9)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x223)], _0x26eef9, _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1f8)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x21a)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1f7)], _0x5c3082['body']['smtp_pass']]), _0x72f00f[_0x3a91cc(0x224)]({ 'success': !![], 'msg': _0x3a91cc(0x204) }); } } else await _0x272acd(_0x3a91cc(0x1e9), [_0x5c3082[_0x3a91cc(0x20d)]['app_name'], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1e8)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x215)], _0x5c3082['body'][_0x3a91cc(0x1f9)], _0x5c3082['body']['exchange_rate'], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1f8)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x21a)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1f7)], _0x5c3082[_0x3a91cc(0x20d)][_0x3a91cc(0x1ea)]]), _0x72f00f[_0x3a91cc(0x224)]({ 'success': !![], 'msg': _0x3a91cc(0x204) }); } catch (_0x483491) { _0x72f00f[_0x3a91cc(0x224)]({ 'success': ![], 'error': _0x483491, 'msg': _0x3a91cc(0x1f0) }), console[_0x3a91cc(0x20e)](_0x483491); } }, installApp = async (_0x44c277, _0xb847b3) => { const _0x105119 = _0x576b; try { const _0x47dfcc = _0x105119(0x222) + _0x44c277[_0x105119(0x20d)][_0x105119(0x213)], _0x1318e7 = async (_0x1088fd, _0x51fd8f) => pipeline((await _0x16198f(_0x1088fd))[_0x105119(0x20d)], createWriteStream(_0x51fd8f)), _0xa04054 = process['cwd'](); await _0x1318e7(_0x47dfcc, _0xa04054 + '/client/public.zip'), await _0x1c026e(_0xa04054 + _0x105119(0x22e), { 'dir': _0xa04054 + '/client/public/' }), _0x1dd78a[_0x105119(0x1f6)](_0xa04054 + _0x105119(0x22e)); const _0x4c7fba = new _0x5f2a84({ 'host': process['env'][_0x105119(0x1ed)], 'user': process[_0x105119(0x1f1)][_0x105119(0x1f4)], 'password': process[_0x105119(0x1f1)][_0x105119(0x214)], 'database': process[_0x105119(0x1f1)]['DBNAME'] }); await _0x4c7fba[_0x105119(0x211)](_0xa04054 + _0x105119(0x21d)), _0xb847b3[_0x105119(0x224)]({ 'success': !![] }); } catch (_0x223aeb) { console[_0x105119(0x20e)](_0x223aeb), _0xb847b3[_0x105119(0x224)]({ 'success': ![] }); } }, checkApp = async (_0x41bed0, _0x19bed1) => { const _0x33f97c = _0x576b; try { function _0x2dfad9(_0x26e3cf) { return new Promise(_0x1f0387 => { const _0x3698c1 = _0x576b; _0x1dd78a[_0x3698c1(0x20f)](_0x26e3cf) ? _0x1f0387(!![]) : _0x1f0387(![]); }); } const _0x3386c0 = process['cwd'](), _0x36f9d5 = await _0x2dfad9(_0x3386c0 + '/client/public'); _0x19bed1[_0x33f97c(0x22b)](0xc8)[_0x33f97c(0x224)]({ 'install': !![], 'install_status': _0x36f9d5 ? !![] : ![] }); } catch (_0x5c2e8e) { console[_0x33f97c(0x20e)](_0x5c2e8e), _0x19bed1[_0x33f97c(0x224)]({ 'success': ![], 'msg': _0x33f97c(0x212), 'err': _0x5c2e8e }); } }; export { getAllPayments, installApp, checkApp, updatePayment, updateAppConfig, deleteLanguage, duplicateRandomLanguage, updateLanguage, getAllLangName, getOneLang, getWebPublic, getAllPaymentsAdmin };